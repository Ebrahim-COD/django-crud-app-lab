{% extends 'base.html' %} 
{% load static %} 
{% block head %}
<link rel="stylesheet" href="{% static 'css/trucks/truck-detail.css' %}" />
{% endblock %} 
{% block content %}
<section class="truck-container">
  <div class="truck-details">
    <h1>{{ truck.name }}</h1>
    {% if truck.year > 0 %}
    <h2>A {{ truck.year }} model {{ truck.make }}</h2>
    {% else %}
    <h2>A {{ truck.make }} truck.</h2>
    {% endif %}
    <p>{{ truck.description }}</p>

    <div class="truck-actions">
      <a href="{% url 'truck-update' truck.id %}" class="btn warn">Edit</a>
      <a href="{% url 'truck-delete' truck.id %}" class="btn danger">Delete</a>
    </div>
  </div>
  
  <div class="truck-fuel-container">
    <section class="fuels">
      <h3>Add Fuel</h3>
      <form
        action="{% url 'add_fuel' truck.id %}"
        method="post"
        class="subsection-content"
        autocomplete="off"
      >
        {% csrf_token %} {{ fueltype_form.as_p }}
        <button type="submit" class="btn submit">Add Fuel</button>
      </form>
      <h3>Fuel Records</h3>
      {% if truck.fueltype_set.count %}
      <table>
        <thead>
          <tr>
            <th>Date</th>
            <th>Fuel Type</th>
          </tr>
        </thead>
        <tbody>
          {% for fuel in truck.fueltype_set.all %}
          <tr>
            <td>{{ fuel.date }}</td>
            <td>{{ fuel.get_fuel_display }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p>No fuel records yet.</p>
      {% endif %}
    </section>
  </div>
</section>
{% endblock %}
